set(CMAKE_CONFIGURATION_TYPES Debug Profile Release)
set(CMAKE_CONFIGURATION_TYPES "${CMAKE_CONFIGURATION_TYPES}" CACHE STRING "Reset the configurations to what we need" FORCE)

set(BUILD_CPU_ARCHITECTURE x64)
set(BUILD_PLATFORM Linux64)
set(LINUX TRUE)
set(OUTPUT_DIRECTORY_NAME "linux_x64_clang")

if(EXISTS "${CRYENGINE_DIR}/linux_bootstrap")
	set(LINUX_BOOTSTRAP_FOLDER "${CRYENGINE_DIR}/linux_bootstrap/Code/SDKs")
	message(STATUS "Changing SDK_DIR from ${SDK_DIR} to ${LINUX_BOOTSTRAP_FOLDER}")
	set(SDK_DIR "${LINUX_BOOTSTRAP_FOLDER}")
else()
	set(LINUX_BOOTSTRAP_FOLDER "${CRYENGINE_DIR}/Code/SDKs")
endif()

set(CLANG_SDK_LOCATION "${LINUX_BOOTSTRAP_FOLDER}/clang/linux")
if(NOT CMAKE_C_COMPILER)
	if(EXISTS "${CLANG_SDK_LOCATION}/bin/clang")
		set(CMAKE_C_COMPILER "${CLANG_SDK_LOCATION}/bin/clang")
	else()
		set(CMAKE_C_COMPILER clang-5.0)
	endif()
endif()
if(NOT CMAKE_CXX_COMPILER)
	if(EXISTS "${CLANG_SDK_LOCATION}/bin/clang++")
		set(CMAKE_CXX_COMPILER "${CLANG_SDK_LOCATION}/bin/clang++")
	else()
		set(CMAKE_CXX_COMPILER clang++-5.0)
	endif()
endif()

set(GCC_SDK_LOCATION "${LINUX_BOOTSTRAP_FOLDER}/gcc/linux")
if (EXISTS ${GCC_SDK_LOCATION})
	set(CMAKE_FIND_ROOT_PATH ${GCC_SDK_LOCATION})
	set(CMAKE_C_COMPILER_EXTERNAL_TOOLCHAIN ${GCC_SDK_LOCATION})
	set(CMAKE_CXX_COMPILER_EXTERNAL_TOOLCHAIN ${GCC_SDK_LOCATION})
	message(STATUS "CMAKE_FIND_ROOT_PATH = ${CMAKE_FIND_ROOT_PATH}")
	message(STATUS "CMAKE_C_COMPILER_EXTERNAL_TOOLCHAIN = ${CMAKE_C_COMPILER_EXTERNAL_TOOLCHAIN}")
	message(STATUS "CMAKE_CXX_COMPILER_EXTERNAL_TOOLCHAIN = ${CMAKE_CXX_COMPILER_EXTERNAL_TOOLCHAIN}")
else()
	message(STATUS "GCC is not in bootstrap, using system's libstdc++")
endif()

message(STATUS "CMAKE_C_COMPILER = ${CMAKE_C_COMPILER}")
message(STATUS "CMAKE_CXX_COMPILER = ${CMAKE_CXX_COMPILER}")

add_definitions(-DLINUX64)

include ("${CMAKE_CURRENT_LIST_DIR}/../../CRYENGINE-CLANG.cmake")

set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -DLINUX -D__linux__" CACHE STRING "C Common Flags" FORCE)
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -DLINUX -D__linux__" CACHE STRING "C++ Common Flags" FORCE)
